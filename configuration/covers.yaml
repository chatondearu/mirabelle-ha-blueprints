# Cover templates configuration
# This file is used to create cover entities for the blinds.
# Its is an example of how to create a cover entity for a blind.
# You can use the [Blind Cover Template Blueprint](https://github.com/chatondearu/mirabelle-ha-blueprints/blob/main/templlates/blind_cover_template.yaml) to create a cover entity for a blind.
# You can also use the [Blind State Tracker Blueprint](https://github.com/chatondearu/mirabelle-ha-blueprints/blob/main/blueprints/automations/blind_state_tracker.yaml) to track the state of the blind.
# You can also use the [Blind Cover Blueprint](https://github.com/chatondearu/mirabelle-ha-blueprints/blob/main/blueprints/automations/blind_cover.yaml) to create a cover entity for a blind.
# You can also use the [Blind State Tracker Blueprint](https://github.com/chatondearu/mirabelle-ha-blueprints/blob/main/blueprints/automations/blind_state_tracker.yaml) to track the state of the blind.
cover:
  - platform: template
    covers:
      living_room_blind:
        friendly_name: "Living Room Blind"
        unique_id: living_room_blind_template
        value_template: "{{ states('input_text.living_room_blind_position') | int }}"
        open_cover:
          service: script.set_blind_position
          data:
            blind_switch: switch.living_room_blind
            last_state: input_text.living_room_blind_position
            travel_time: 30
            target_position: "100% (Open)"
        close_cover:
          service: script.set_blind_position
          data:
            blind_switch: switch.living_room_blind
            last_state: input_text.living_room_blind_position
            travel_time: 30
            target_position: "0% (Closed)"
        stop_cover:
          service: switch.turn_off
          data:
            entity_id: switch.living_room_blind
        set_cover_position:
          service: script.set_blind_position
          data:
            blind_switch: switch.living_room_blind
            last_state: input_text.living_room_blind_position
            travel_time: 30
            target_position: >
              {% if position <= 25 %}
                "0% (Closed)"
              {% elif position <= 50 %}
                "25%"
              {% elif position <= 75 %}
                "50%"
              {% else %}
                "75%"
              {% endif %}
        icon_template: >
          {% if is_state('switch.living_room_blind', 'on') %}
            {% if states('input_text.living_room_blind_direction') == 'opening' %}
              mdi:arrow-up-bold
            {% else %}
              mdi:arrow-down-bold
            {% endif %}
          {% else %}
            {% if states('input_text.living_room_blind_position') | int == 0 %}
              mdi:window-closed
            {% elif states('input_text.living_room_blind_position') | int == 100 %}
              mdi:window-open
            {% else %}
              mdi:window-shutter
            {% endif %}
          {% endif %} 